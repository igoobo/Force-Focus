@keyframes summaryFadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.activity-summary {
  display: flex;
  flex-direction: column;
  height: calc(100vh - 64px); 
  width: 100%;
  padding: 24px;
  box-sizing: border-box;
  background-color: var(--bg-main);
  transition: background-color 0.3s ease;
  overflow: hidden;
  animation: summaryFadeIn 0.4s ease-out forwards;
}

/* 상단 헤더 */
.summary-header {
  flex-shrink: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding: 0 4px;
  flex-shrink: 0; /* 헤더 크기 고정 */
}

.summary-title {
  font-size: 1.25rem;
  font-weight: 700;
  color: var(--text-main);
  transition: color 0.3s ease;
}

.toggle-btn {
  padding: 8px 16px;
  border-radius: 8px;
  background-color: #4f46e5 !important;
  color: #ffffff !important;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.toggle-btn:hover {
  background-color: #4338ca !important;
}

/* 본문 레이아웃 컨테이너 */
.summary-content {
  display: flex;
  gap: 20px;
  flex: 1; /* 남은 화면 높이를 모두 차지 */
  min-height: 0; /* 자식 요소의 높이 계산 오류 방지 */
}

/* 가로/세로 레이아웃 대응 */
.activity-summary.horizontal .summary-content {
  flex-direction: column;
  overflow-y: auto; /* 내용이 많을 경우 내부 스크롤 */
}

/* 세로 모드 핵심 수정 부분 */
.activity-summary.vertical .summary-content {
  flex-direction: row;
  align-items: stretch;
}

.activity-summary.vertical .summary-graph,
.activity-summary.vertical .summary-report {
  flex: 1;
  height: 100%; /* 하단까지 꽉 채움 */
  min-width: 0;
}

/* 공통 섹션 스타일 (그래프 & 보고서) */
.summary-graph, .summary-report {
  background-color: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 24px;
  display: flex;
  flex-direction: column;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
  flex: 1; /* 1:1 비율로 가로 너비 차지 */
  height: 100%; /* 세로 화면을 전부 채우도록 설정 */
  box-sizing: border-box;
}

.summary-graph h3, .summary-report h3 {
  margin: 0 0 16px 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text-main);
  transition: color 0.3s ease;
  flex-shrink: 0;
}

/* 그래프 영역 */
.graph-placeholder {
  flex: 1;
  width: 100%;
  min-height: 200px;
}

/* 보고서 내부 스크롤 처리 (내용이 길어질 경우 대비) */
.summary-report {
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.report-list {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-bottom: 24px;
  flex-shrink: 0;
}

.report-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px;
  background-color: var(--bg-main);
  border-radius: 8px;
  border: 1px solid var(--border-color);
  transition: background-color 0.3s ease, border-color 0.3s ease;
}

.report-item .label {
  font-size: 0.8rem;
  color: var(--text-muted);
  font-weight: 500;
  transition: color 0.3s ease;
}

.report-item .value {
  font-size: 1.05rem;
  font-weight: 700;
  color: var(--text-main);
  transition: color 0.3s ease;
}

.report-item .value.highlight {
  color: #3b82f6;
  transition: color 0.3s ease;
}

/* 보고서 텍스트 설명 */
.report-description {
  flex: 1;
  margin-top: 10px;
  line-height: 1.6;
  line-height: 1.6;
  color: var(--text-muted);
  font-size: 0.95rem;
  padding: 16px;
  background-color: var(--bg-main);
  border-radius: 8px;
  border-left: 4px solid #3b82f6;
  transition: background-color 0.3s ease, color 0.3s ease;
}

.report-description p {
  color: var(--text-main);
  transition: color 0.3s ease-in-out !important;
}

.dark-theme .toggle-btn { background-color: #4345a4 !important; color: white; }

.dark-theme .report-description p {
  color: var(--text-muted);
}

/* 반응형 모바일 대응 */
@media (max-width: 1024px) {
  .activity-summary.vertical .summary-content {
    flex-direction: column;
    overflow-y: auto;
  }
  .summary-graph, .summary-report {
    height: auto;
    min-height: 400px;
  }
}